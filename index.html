<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kaming Lee</title>
  <link rel="stylesheet" href="index.css" />
</head>

<body>
  <!-- FULLSCREEN SLIDE IMAGE -->
  <img id="slide" alt="" />

  <!-- FIXED EMAIL -->
  <a href="mailto:karning.lee@gmail.com" class="site-email">
    karning.lee@gmail.com
  </a>

  <!-- CLICK ZONES -->
  <div class="nav-zone nav-left" aria-hidden="true"></div>
  <div class="nav-zone nav-right" aria-hidden="true"></div>

  <script>
    const slides = [
      { desktop: 'assets/img/onesec.gif?v=4', mobile: 'assets/img/onesec_mobile.gif?v=4' },
      { desktop: 'assets/img/stirfry1.jpg' },
      { desktop: 'assets/img/stirfry2.jpg' }
    ];

    let index = 0;

    function isMobile() {
      return window.matchMedia('(max-width: 768px)').matches;
    }

    function setSlide(i) {
      const s = slides[i];
      const src = (isMobile() && s.mobile) ? s.mobile : s.desktop;
      document.getElementById('slide').src = src;
    }

    function nextSlide() {
      index = (index + 1) % slides.length;
      setSlide(index);
    }

    function prevSlide() {
      index = (index - 1 + slides.length) % slides.length;
      setSlide(index);
    }

    // init
    setSlide(index);

    // click zones
    document.querySelector('.nav-left').addEventListener('click', prevSlide);
    document.querySelector('.nav-right').addEventListener('click', nextSlide);

    // keyboard
    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') nextSlide();
      if (e.key === 'ArrowLeft') prevSlide();
    });

    // resize swap (desktop â†” mobile)
    window.addEventListener('resize', () => setSlide(index));

    // touch swipe
    let touchStartX = null;

    window.addEventListener('touchstart', (e) => {
      if (e.touches.length !== 1) return;
      touchStartX = e.touches[0].clientX;
    }, { passive: true });

    window.addEventListener('touchend', (e) => {
      if (touchStartX === null) return;

      const dx = e.changedTouches[0].clientX - touchStartX;
      const threshold = 50;

      if (dx > threshold) prevSlide();
      if (dx < -threshold) nextSlide();

      touchStartX = null;
    }, { passive: true });
  </script>
</body>
</html>
