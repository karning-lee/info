<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kaming Lee</title>
  <link rel="stylesheet" href="index.css" />
</head>

<body>
  <!-- FIXED EMAIL -->
  <a href="mailto:karning.lee@gmail.com" class="site-email">
    karning.lee@gmail.com
  </a>

  <!-- CLICK ZONES -->
  <div class="nav-zone nav-left" aria-hidden="true"></div>
  <div class="nav-zone nav-right" aria-hidden="true"></div>

  <script>
    /* ===============================
       SLIDES (ADD IMAGES HERE ONLY)
       =============================== */

    const slides = [
      {
        desktop: 'assets/img/onesec.gif?v=4',
        mobile: 'assets/img/onesec_mobile.gif?v=4'
      },
      {
        desktop: 'assets/img/stirfry1.jpg'
      },
      {
        desktop: 'assets/img/stirfry2.jpg'
      }
    ];

    let index = 0;

    function setBackgroundForSlide(i) {
      const s = slides[i];

      document.documentElement.style.setProperty(
        '--bg-desktop',
        `url("${s.desktop}")`
      );

      document.documentElement.style.setProperty(
        '--bg-mobile',
        `url("${s.mobile ? s.mobile : s.desktop}")`
      );
    }

    function nextSlide() {
      index = (index + 1) % slides.length;
      setBackgroundForSlide(index);
    }

    function prevSlide() {
      index = (index - 1 + slides.length) % slides.length;
      setBackgroundForSlide(index);
    }

    /* INIT */
    setBackgroundForSlide(index);

    /* CLICK NAVIGATION */
    document.querySelector('.nav-left').addEventListener('click', prevSlide);
    document.querySelector('.nav-right').addEventListener('click', nextSlide);

    /* KEYBOARD NAV */
    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') nextSlide();
      if (e.key === 'ArrowLeft') prevSlide();
    });

    /* TOUCH SWIPE */
    let touchStartX = null;

    window.addEventListener('touchstart', (e) => {
      if (e.touches.length !== 1) return;
      touchStartX = e.touches[0].clientX;
    }, { passive: true });

    window.addEventListener('touchend', (e) => {
      if (touchStartX === null) return;

      const dx = e.changedTouches[0].clientX - touchStartX;
      const threshold = 50;

      if (dx > threshold) prevSlide();
      if (dx < -threshold) nextSlide();

      touchStartX = null;
    }, { passive: true });
  </script>
</body>
</html>
